function create_user(){for(var e=new FormData,a=document.getElementById("create-user-form").children,t=0;t<a.length;t++)"text"==a[t].type||"password"==a[t].type?e.append(a[t].name,a[t].value):"file"==a[t].type&&e.append(a[t].name,a[t].files[0],a[t].files[0].name);$.ajax({method:"POST",url:"/create/new_user",data:e,processData:!1,contentType:!1,success:function(){console.log("Back!")}})}
var ClickGame={init:function(){gameObject.centerPoint=[0,0],gameObject.screenHeight=window.innerHeight,gameObject.screenWidth=window.innerWidth,gameObject.container=document.getElementsByTagName("body")[0],gameObject.previousHeight=gameObject.screenHeight,userControlled.cannons={topRight:{cannon:null,cannonBase:"0px",position:"right"},bottomRight:{cannon:null,cannonBase:"0px",position:"right"},topLeft:{cannon:null,cannonBase:"0px","position:":"left"},bottomLeft:{cannon:null,cannonBase:"0px","position:":"left"}},gameObject.mouseX,gameObject.mouseY,gameObject.currentCannon="topRight";for(var e in userControlled.cannons)userControlled.cannons[e].cannon=document.createElement("div"),userControlled.cannons[e].cannon.setAttribute("id","cannon-"+e),userControlled.cannons[e].cannon.setAttribute("class","cannon-general"),gameObject.container.appendChild(userControlled.cannons[e].cannon),userControlled.cannons[e].cannonBase=userControlled.cannons[e].cannon.offsetWidth;gameObject.cannonHeight=document.getElementById("cannon-"+gameObject.currentCannon).clientHeight,gameObject.laserArray=[],gameObject.laserCounter=0,gameObject.container.addEventListener("click",ClickGame.laserInit),document.addEventListener("keyup",ClickGame.keypress),document.onmousemove=ClickGame.followMouse},laserInit:function(e){var t=e.clientX-gameObject.screenWidth/2,n=Math.abs(e.clientY-gameObject.screenHeight),a=ClickGame.getSlope(t,n),o=t>0?ClickGame.getNewPointX(gameObject.cannonHeight,a):-ClickGame.getNewPointX(gameObject.cannonHeight,a),c=ClickGame.getNewPointY(o,a),r={},i=ClickGame.createLaser(o,c);r.slope=a,r.Y=c,r.X=o,r.height=gameObject.cannonHeight,r.lineLength=ClickGame.lineLength(t,n),r.laserNum=gameObject.laserCounter,r.speed=1;var s=document.getElementById("tie-fighter-audio");s.setAttribute("src","http://www.sa-matra.net/sounds/starwars/TIE-Fire.wav"),s.play(),gameObject.laserArray.push(r),ClickGame.fireLaser(gameObject.laserArray[gameObject.laserCounter-1],i)},createLaser:function(e,t){var n=document.createElement("div");n.style.transform,n.style.webkitTransform,n.className="laser laserNum-"+gameObject.laserCounter;ClickGame.updateLaserPosition(e,t,n);return gameObject.container.appendChild(n),gameObject.laserCounter+=1,n},fireLaser:function(e,t){e.height=e.height+e.speed,e.X=e.X>0?ClickGame.getNewPointX(e.height,e.slope):-ClickGame.getNewPointX(e.height,e.slope),e.Y=ClickGame.getNewPointY(e.X,e.slope),e.speed+=.03,ClickGame.updateLaserPosition(e.X,e.Y,t);ClickGame.lineLength(e.X,e.Y);window.setTimeout(function(){if(e.X<gameObject.screenWidth-gameObject.screenWidth/2&&e.X>0-gameObject.screenWidth/2&&e.Y<gameObject.screenHeight)ClickGame.fireLaser(e,t);else{document.getElementsByClassName("laserNum-"+e.laserNum)[0];document.getElementsByTagName("body")[0].removeChild(t)}},5)},updateLaserPosition:function(e,t,n){var a=gameObject.cannonWidth/2,o={left:-1,top:-1};return o.left=e+gameObject.screenWidth/2,o.top=Math.abs(t-gameObject.screenHeight),n.style.left=o.left+"px",n.style.top=o.top-a+"px",o},followMouseBottom:function(e){var t=e.clientX-gameObject.screenWidth/2,n=Math.abs(e.clientY-gameObject.screenHeight),a=n/ClickGame.lineLength(t,n),o=Math.asin(a)*(180/Math.PI);o=t>0?90-o:o-90},followMouse:function(e){var t=userControlled.cannons[gameObject.currentCannon].position,n=e.clientX,a=Math.abs(e.clientY-gameObject.screenHeight),o=userControlled.cannons[gameObject.currentCannon].cannon.getBoundingClientRect(),c=Math.abs(o.bottom-gameObject.cannonHeight/2-gameObject.screenHeight),r=("right"==t?o.right:o.left,"right"==t?gameObject.screenWidth:0),i=a,s=n,g=a,l=c,m=Math.abs(s-r)/Math.abs(l-i),u=180*Math.atan(m)/Math.PI;u=90-u,"right"==t?g<l&&(u=-u):g>l&&(u=-u),userControlled.cannons[gameObject.currentCannon].cannon.style.webkitTransform="translateY(-50%) rotate( "+u+"deg)",userControlled.cannons[gameObject.currentCannon].cannon.style.transform="translateY(-50%) rotate( "+u+"deg)"},keypress:function(e){switch(e.keyCode){case 49:gameObject.currentCannon="topRight";break;case 50:gameObject.currentCannon="bottomRight";break;case 51:gameObject.currentCannon="topLeft";break;case 52:gameObject.currentCannon="bottomLeft"}},resizing:function(){gameObject.screenHeight=window.innerHeight,gameObject.screenWidth=window.innerWidth,gameObject.screenHeight!=gameObject.previousHeight&&(gameObject.previousHeight=gameObject.screenHeight)},getSlope:function(e,t){return(t-gameObject.centerPoint[1])/(e-gameObject.centerPoint[0])},getNewPointX:function(e,t){return gameObject.centerPoint[0]+e/Math.sqrt(1+Math.pow(t,2))},getNewPointY:function(e,t){return t*e+gameObject.centerPoint[1]},lineLength:function(e,t){var n=Math.pow(gameObject.centerPoint[0]-e,2),a=Math.pow(gameObject.centerPoint[1]-t,2);return Math.sqrt(n+a)}},gameObject=new Object,userControlled=new Object;window.onload=ClickGame.init();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFqYXguanMiLCJtYWluLmpzIiwidGVtcC5qcyJdLCJuYW1lcyI6WyJjcmVhdGVfdXNlciIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJ0aGVfZm9ybSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjaGlsZHJlbiIsImkiLCJsZW5ndGgiLCJ0eXBlIiwiYXBwZW5kIiwibmFtZSIsInZhbHVlIiwiZmlsZXMiLCIkIiwiYWpheCIsIm1ldGhvZCIsInVybCIsImRhdGEiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwic3VjY2VzcyIsImNvbnNvbGUiLCJsb2ciLCJDbGlja0dhbWUiLCJpbml0IiwiZ2FtZU9iamVjdCIsImNlbnRlclBvaW50Iiwic2NyZWVuSGVpZ2h0Iiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJzY3JlZW5XaWR0aCIsImlubmVyV2lkdGgiLCJjb250YWluZXIiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInByZXZpb3VzSGVpZ2h0IiwidXNlckNvbnRyb2xsZWQiLCJjYW5ub25zIiwidG9wUmlnaHQiLCJjYW5ub24iLCJjYW5ub25CYXNlIiwicG9zaXRpb24iLCJib3R0b21SaWdodCIsInRvcExlZnQiLCJwb3NpdGlvbjoiLCJib3R0b21MZWZ0IiwibW91c2VYIiwibW91c2VZIiwiY3VycmVudENhbm5vbiIsImoiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiYXBwZW5kQ2hpbGQiLCJvZmZzZXRXaWR0aCIsImNhbm5vbkhlaWdodCIsImNsaWVudEhlaWdodCIsImxhc2VyQXJyYXkiLCJsYXNlckNvdW50ZXIiLCJhZGRFdmVudExpc3RlbmVyIiwibGFzZXJJbml0Iiwia2V5cHJlc3MiLCJvbm1vdXNlbW92ZSIsImZvbGxvd01vdXNlIiwiZXZlbnQiLCJjbGllbnRYIiwiTWF0aCIsImFicyIsImNsaWVudFkiLCJzbG9wZSIsImdldFNsb3BlIiwibmV3WCIsImdldE5ld1BvaW50WCIsIm5ld1kiLCJnZXROZXdQb2ludFkiLCJsYXNlclZhbHVlcyIsImxhc2VyIiwiY3JlYXRlTGFzZXIiLCJsaW5lTGVuZ3RoIiwidGllRmlnaHRlck5vaXNlIiwicGxheSIsInB1c2giLCJmaXJlTGFzZXIiLCJYIiwiWSIsInN0eWxlIiwidHJhbnNmb3JtIiwid2Via2l0VHJhbnNmb3JtIiwiY2xhc3NOYW1lIiwidXBkYXRlTGFzZXJQb3NpdGlvbiIsInNldFRpbWVvdXQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwicmVtb3ZlQ2hpbGQiLCJjZW50ZXJZIiwiY2Fubm9uV2lkdGgiLCJsZWZ0IiwidG9wIiwiZm9sbG93TW91c2VCb3R0b20iLCJTT0giLCJkZWdyZWUiLCJhc2luIiwiUEkiLCJwbGFjZW1lbnQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJjYW5ub25ZIiwiYm90dG9tIiwid2FsbCIsInJpZ2h0IiwibW91c2UiLCJ0YW4iLCJhdGFuIiwia2V5Q29kZSIsInJlc2l6aW5nIiwiZGlzdGFuY2UiLCJzcXJ0IiwicG93IiwieENhbGMiLCJ5Q2FsYyIsIk9iamVjdCIsIm9ubG9hZCJdLCJtYXBwaW5ncyI6IkFBQ0EsU0FBU0EsY0FLUixJQUFLLElBSkRDLEVBQVcsSUFBSUMsU0FFZkMsRUFBV0MsU0FBU0MsZUFBZ0Isb0JBQXFCQyxTQUVwREMsRUFBSSxFQUFHQSxFQUFJSixFQUFTSyxPQUFRRCxJQUUvQixRQUFVSixFQUFTSSxHQUFHRSxNQUFRLFlBQWNOLEVBQVNJLEdBQUdFLEtBQzVEUixFQUFTUyxPQUFRUCxFQUFTSSxHQUFHSSxLQUFNUixFQUFTSSxHQUFHSyxPQUNwQyxRQUFVVCxFQUFTSSxHQUFHRSxNQUNqQ1IsRUFBU1MsT0FBUVAsRUFBU0ksR0FBR0ksS0FBTVIsRUFBU0ksR0FBR00sTUFBTSxHQUFJVixFQUFTSSxHQUFHTSxNQUFNLEdBQUdGLE1BSWhGRyxFQUFFQyxNQUNEQyxPQUFTLE9BQ1RDLElBQU8sbUJBQ1BDLEtBQVFqQixFQUNSa0IsYUFBYSxFQUNWQyxhQUFhLEVBQ2hCQyxRQUFVLFdBQ1RDLFFBQVFDLElB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V3NCLGNBQWdCLFVBQzNCLE1BQ0QsS0FBSyxHQUNKdEIsV0FBV3NCLGNBQWdCLGVBTTlCK0QsU0FBVSxXQUNUckYsV0FBV0UsYUFBZUMsT0FBT0MsWUFDakNKLFdBQVdLLFlBQWNGLE9BQU9HLFdBQzVCTixXQUFXRSxjQUFnQkYsV0FBV1MsaUJBQ3pDVCxXQUFXUyxlQUFpQlQsV0FBV0UsZUFLekN5QyxTQUFVLFNBQVVhLEVBQUdDLEdBQ3RCLE9BQVNBLEVBQUl6RCxXQUFXQyxZQUFZLEtBQVN1RCxFQUFJeEQsV0FBV0MsWUFBWSxLQUl6RTRDLGFBQWMsU0FBVXlDLEVBQVU1QyxHQUNqQyxPQUFPMUMsV0FBV0MsWUFBWSxHQUFLcUYsRUFBVy9DLEtBQUtnRCxLQUFRLEVBQUloRCxLQUFLaUQsSUFBSTlDLEVBQU8sS0FJaEZLLGFBQWMsU0FBVUgsRUFBTUYsR0FDN0IsT0FBT0EsRUFBUUUsRUFBTzVDLFdBQVdDLFlBQVksSUFJOUNrRCxXQUFZLFNBQVdLLEVBQUdDLEdBQ3pCLElBQUlnQyxFQUFRbEQsS0FBS2lELElBQU94RixXQUFXQyxZQUFZLEdBQUt1RCxFQUFNLEdBQ3REa0MsRUFBUW5ELEtBQUtpRCxJQUFPeEYsV0FBV0MsWUFBWSxHQUFLd0QsRUFBSyxHQUV6RCxPQUFPbEIsS0FBS2dELEtBQU9FLEVBQVFDLEtBTXpCMUYsV0FBYSxJQUFJMkYsT0FDakJqRixlQUFpQixJQUFJaUYsT0FDekJ4RixPQUFPeUYsT0FBUzlGLFVBQVVDO0FDdE4xQiIsImZpbGUiOiJhbGxqcy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmZ1bmN0aW9uIGNyZWF0ZV91c2VyKCkgeyBcblx0dmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG5cblx0dmFyIHRoZV9mb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIFwiY3JlYXRlLXVzZXItZm9ybVwiICkuY2hpbGRyZW47XG5cblx0Zm9yKCB2YXIgaSA9IDA7IGkgPCB0aGVfZm9ybS5sZW5ndGg7IGkrKyApIHtcblxuXHRcdGlmICggJ3RleHQnID09IHRoZV9mb3JtW2ldLnR5cGUgfHwgJ3Bhc3N3b3JkJyA9PSB0aGVfZm9ybVtpXS50eXBlICkge1xuXHRcdFx0Zm9ybURhdGEuYXBwZW5kKCB0aGVfZm9ybVtpXS5uYW1lLCB0aGVfZm9ybVtpXS52YWx1ZSApO1xuXHRcdH0gZWxzZSBpZiAoICdmaWxlJyA9PSB0aGVfZm9ybVtpXS50eXBlICkge1xuXHRcdFx0Zm9ybURhdGEuYXBwZW5kKCB0aGVfZm9ybVtpXS5uYW1lLCB0aGVfZm9ybVtpXS5maWxlc1swXSwgdGhlX2Zvcm1baV0uZmlsZXNbMF0ubmFtZSk7IFxuXHRcdH1cblx0fVxuXG5cdCQuYWpheCgge1xuXHRcdG1ldGhvZFx0OiAnUE9TVCcsXG5cdFx0dXJsXHRcdDogJy9jcmVhdGUvbmV3X3VzZXInLFxuXHRcdGRhdGEgXHQ6IGZvcm1EYXRhLFxuXHRcdHByb2Nlc3NEYXRhOiBmYWxzZSwgIFxuXHQgICAgY29udGVudFR5cGU6IGZhbHNlLFxuXHRcdHN1Y2Nlc3MgOiBmdW5jdGlvbigpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdCYWNrIScpO1xuXHRcdH1cblx0fSk7XG59IiwidmFyIENsaWNrR2FtZSA9IHtcblx0Ly8gU2V0dGluZyB1cCBnYW1lT2JqZWN0IHZhcmlhYmxlc1xuXHRpbml0OiBmdW5jdGlvbiAoKSB7IFxuXHRcdFx0Z2FtZU9iamVjdC5jZW50ZXJQb2ludCA9IFswLCAwXTtcblx0XHRcdGdhbWVPYmplY3Quc2NyZWVuSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuXHRcdFx0Z2FtZU9iamVjdC5zY3JlZW5XaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXHRcdFx0Z2FtZU9iamVjdC5jb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdO1xuXHRcdFx0Z2FtZU9iamVjdC5wcmV2aW91c0hlaWdodCA9IGdhbWVPYmplY3Quc2NyZWVuSGVpZ2h0O1xuXHRcdFx0dXNlckNvbnRyb2xsZWQuY2Fubm9ucyA9IHtcblx0XHRcdFx0J3RvcFJpZ2h0JyA6IHsgJ2Nhbm5vbicgOiBudWxsLCAnY2Fubm9uQmFzZSc6ICcwcHgnLCAncG9zaXRpb24nOiAncmlnaHQnfSxcblx0XHRcdFx0J2JvdHRvbVJpZ2h0JyA6IHsgJ2Nhbm5vbicgOiBudWxsLCAnY2Fubm9uQmFzZSc6ICcwcHgnLCAncG9zaXRpb24nOiAncmlnaHQnfSxcblx0XHRcdFx0J3RvcExlZnQnIDogeyAnY2Fubm9uJyA6IG51bGwsICdjYW5ub25CYXNlJzogJzBweCcsICdwb3NpdGlvbjonOiAnbGVmdCd9LFxuXHRcdFx0XHQnYm90dG9tTGVmdCcgOiB7ICdjYW5ub24nIDogbnVsbCwgJ2Nhbm5vbkJhc2UnOiAnMHB4JywgJ3Bvc2l0aW9uOic6ICdsZWZ0J31cblx0XHRcdH07XG5cdFx0XHRnYW1lT2JqZWN0Lm1vdXNlWDtcblx0XHRcdGdhbWVPYmplY3QubW91c2VZO1xuXHRcdFx0Z2FtZU9iamVjdC5jdXJyZW50Q2Fubm9uID0gJ3RvcFJpZ2h0JzsgXG5cblx0XHRcdGZvciggdmFyIGogaW4gdXNlckNvbnRyb2xsZWQuY2Fubm9ucyApIHtcblxuXHRcdFx0XHR1c2VyQ29udHJvbGxlZC5jYW5ub25zW2pdLmNhbm5vbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHR1c2VyQ29udHJvbGxlZC5jYW5ub25zW2pdLmNhbm5vbi5zZXRBdHRyaWJ1dGUoICdpZCcsICdjYW5ub24tJyArIGogKTtcblx0XHRcdFx0dXNlckNvbnRyb2xsZWQuY2Fubm9uc1tqXS5jYW5ub24uc2V0QXR0cmlidXRlKCAnY2xhc3MnLCAnY2Fubm9uLWdlbmVyYWwnICk7XG5cdFx0XHRcdGdhbWVPYmplY3QuY29udGFpbmVyLmFwcGVuZENoaWxkKHVzZXJDb250cm9sbGVkLmNhbm5vbnNbal0uY2Fubm9uKTtcblx0XHRcdFx0dXNlckNvbnRyb2xsZWQuY2Fubm9uc1tqXS5jYW5ub25CYXNlID0gdXNlckNvbnRyb2xsZWQuY2Fubm9uc1tqXS5jYW5ub24ub2Zmc2V0V2lkdGg7XG5cblx0XHRcdH1cblxuXHRcdFx0Z2FtZU9iamVjdC5jYW5ub25IZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2Fubm9uLScgKyBnYW1lT2JqZWN0LmN1cnJlbnRDYW5ub24pLmNsaWVudEhlaWdodDtcblx0XHRcdGdhbWVPYmplY3QubGFzZXJBcnJheSA9IFtdO1xuXHRcdFx0Z2FtZU9iamVjdC5sYXNlckNvdW50ZXIgPSAwO1xuXHRcdFx0XG5cdFx0XHRnYW1lT2JqZWN0LmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIENsaWNrR2FtZS5sYXNlckluaXQpO1xuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBDbGlja0dhbWUua2V5cHJlc3MpO1xuXG5cdFx0XHRkb2N1bWVudC5vbm1vdXNlbW92ZSA9IENsaWNrR2FtZS5mb2xsb3dNb3VzZTtcblx0fSxcblxuXHQvLyBzZXRzIHVwIHRoZSBuZWVkZWQgdmFsdWVzIGZvciBjcmVhdGluZyB0aGUgbGF6ZXIgdXNpbmcgdGhlIGNsaWNrIGV2ZW50LiBDYWxscyBjcmVhdGUgbGFzZXIgYW5kIHBhc3NlcyB0aGUgc3RhcnRpbmcgcG9pbnQuXG5cdGxhc2VySW5pdDogZnVuY3Rpb24oZXZlbnQpIHtcblx0XHR2YXIgbW91c2VYID0gZXZlbnQuY2xpZW50WCAtICggZ2FtZU9iamVjdC5zY3JlZW5XaWR0aCAvIDIgKTtcblx0XHR2YXIgbW91c2VZID0gTWF0aC5hYnMoIGV2ZW50LmNsaWVudFkgLSBnYW1lT2JqZWN0LnNjcmVlbkhlaWdodCApO1xuXHRcdHZhciBzbG9wZSA9IENsaWNrR2FtZS5nZXRTbG9wZSggbW91c2VYLCBtb3VzZVkgKTtcblx0XHR2YXIgbmV3WCA9ICggbW91c2VYID4gMCA/IENsaWNrR2FtZS5nZXROZXdQb2ludFgoIGdhbWVPYmplY3QuY2Fubm9uSGVpZ2h0LCBzbG9wZSApIDogLUNsaWNrR2FtZS5nZXROZXdQb2ludFgoIGdhbWVPYmplY3QuY2Fubm9uSGVpZ2h0LCBzbG9wZSApICk7XG5cdFx0dmFyIG5ld1kgPSBDbGlja0dhbWUuZ2V0TmV3UG9pbnRZKCBuZXdYLCBzbG9wZSApO1xuXHRcdHZhciBsYXNlclZhbHVlcyA9IHt9O1xuXHRcdHZhciBsYXNlciA9IENsaWNrR2FtZS5jcmVhdGVMYXNlciggbmV3WCwgbmV3WSApO1xuXHRcdHZhciBsYXNlcmZpcmUgPSBbXTtcblxuXHRcdGxhc2VyVmFsdWVzWydzbG9wZSddID0gc2xvcGU7XG5cdFx0bGFzZXJWYWx1ZXNbJ1knXSA9IG5ld1k7XG5cdFx0bGFzZXJWYWx1ZXNbJ1gnXSA9IG5ld1g7XG5cdFx0bGFzZXJWYWx1ZXNbJ2hlaWdodCddID0gZ2FtZU9iamVjdC5jYW5ub25IZWlnaHQ7XG5cdFx0bGFzZXJWYWx1ZXNbJ2xpbmVMZW5ndGgnXSA9IENsaWNrR2FtZS5saW5lTGVuZ3RoKCBtb3VzZVgsIG1vdXNlWSApO1xuXHRcdGxhc2VyVmFsdWVzWydsYXNlck51bSddID0gZ2FtZU9iamVjdC5sYXNlckNvdW50ZXI7XG5cdFx0bGFzZXJWYWx1ZXNbJ3NwZWVkJ10gPSAxO1xuXG4gICAgXHR2YXIgdGllRmlnaHRlck5vaXNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpZS1maWdodGVyLWF1ZGlvJyk7XG4gICAgXHR0aWVGaWdodGVyTm9pc2Uuc2V0QXR0cmlidXRlKCdzcmMnLCAnaHR0cDovL3d3dy5zYS1tYXRyYS5uZXQvc291bmRzL3N0YXJ3YXJzL1RJRS1GaXJlLndhdicpO1xuICAgIFx0dGllRmlnaHRlck5vaXNlLnBsYXkoKTtcbiAgICBcblx0XHRnYW1lT2JqZWN0Lmxhc2VyQXJyYXkucHVzaCggbGFzZXJWYWx1ZXMgKTtcblxuXHRcdENsaWNrR2FtZS5maXJlTGFzZXIoIGdhbWVPYmplY3QubGFzZXJBcnJheVtnYW1lT2JqZWN0Lmxhc2VyQ291bnRlciAtIDFdLCBsYXNlciApO1x0XG5cdH0sXG5cblx0Ly9DcmVhdGVzIGEgbGFzZXIgYmFzZWQgb24gd2hlcmUgdGhlIGNhbm5vbiBpcyBjdXJyZW50bHkgcG9pbnRpbmcuXG5cdGNyZWF0ZUxhc2VyOiBmdW5jdGlvbiggWCwgWSApIHtcblx0XHR2YXIgbGFzZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRsYXNlci5zdHlsZS50cmFuc2Zvcm07XG5cdFx0bGFzZXIuc3R5bGUud2Via2l0VHJhbnNmb3JtO1xuXG5cdFx0bGFzZXIuY2xhc3NOYW1lID0gJ2xhc2VyIGxhc2VyTnVtLScgKyBnYW1lT2JqZWN0Lmxhc2VyQ291bnRlcjtcblx0XHR2YXIgcG9zaXRpb24gPSBDbGlja0dhbWUudXBkYXRlTGFzZXJQb3NpdGlvbihYLCBZLCBsYXNlcik7XG5cdFx0XG5cdFx0Z2FtZU9iamVjdC5jb250YWluZXIuYXBwZW5kQ2hpbGQoIGxhc2VyICk7XG5cdFx0Z2FtZU9iamVjdC5sYXNlckNvdW50ZXIgKz0gMTtcblxuXHRcdHJldHVybiBsYXNlcjtcblx0fSxcblxuXHRmaXJlTGFzZXI6IGZ1bmN0aW9uKCBsYXNlclZhbHVlcywgbGFzZXIgKSB7XG5cdFx0bGFzZXJWYWx1ZXNbJ2hlaWdodCddID0gbGFzZXJWYWx1ZXNbJ2hlaWdodCddICsgbGFzZXJWYWx1ZXNbJ3NwZWVkJ107XG5cdFx0bGFzZXJWYWx1ZXNbJ1gnXSA9ICggbGFzZXJWYWx1ZXNbJ1gnXSA+IDAgPyBDbGlja0dhbWUuZ2V0TmV3UG9pbnRYKCBsYXNlclZhbHVlc1snaGVpZ2h0J10sIGxhc2VyVmFsdWVzWydzbG9wZSddICkgOiAtIENsaWNrR2FtZS5nZXROZXdQb2ludFgoIGxhc2VyVmFsdWVzWydoZWlnaHQnXSwgbGFzZXJWYWx1ZXNbJ3Nsb3BlJ10gKSApO1xuXHRcdGxhc2VyVmFsdWVzWydZJ10gPSBDbGlja0dhbWUuZ2V0TmV3UG9pbnRZKCBsYXNlclZhbHVlc1snWCddLCBsYXNlclZhbHVlc1snc2xvcGUnXSApO1xuXHRcdGxhc2VyVmFsdWVzWydzcGVlZCddICs9IC4wMztcblxuXHRcdENsaWNrR2FtZS51cGRhdGVMYXNlclBvc2l0aW9uKCBsYXNlclZhbHVlc1snWCddLCBsYXNlclZhbHVlc1snWSddLCBsYXNlciApO1xuXHRcdHZhciB0cmF2ZWxlZERpc3RhbmNlID0gQ2xpY2tHYW1lLmxpbmVMZW5ndGgoIGxhc2VyVmFsdWVzWydYJ10sIGxhc2VyVmFsdWVzWydZJ10gKTtcblx0XHR3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKXtcblx0XHRcdGlmICggbGFzZXJWYWx1ZXNbJ1gnXSA8ICggZ2FtZU9iamVjdC5zY3JlZW5XaWR0aCAtICggZ2FtZU9iamVjdC5zY3JlZW5XaWR0aCAvIDIpICkgJiYgbGFzZXJWYWx1ZXNbJ1gnXSA+ICggMCAtIGdhbWVPYmplY3Quc2NyZWVuV2lkdGggLyAyICkgJiYgbGFzZXJWYWx1ZXNbJ1knXSA8IGdhbWVPYmplY3Quc2NyZWVuSGVpZ2h0ICkge1xuXHRcdFx0XHRDbGlja0dhbWUuZmlyZUxhc2VyKCBsYXNlclZhbHVlcywgbGFzZXIgKTsgXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2YXIgdGhlX2xhc2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggJ2xhc2VyTnVtLScgKyBsYXNlclZhbHVlc1snbGFzZXJOdW0nXSApWzBdO1xuXHRcdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdLnJlbW92ZUNoaWxkKCBsYXNlciApO1xuXHRcdFx0fVxuXHRcdH0sIDUpO1xuXHR9LFxuXG5cdHVwZGF0ZUxhc2VyUG9zaXRpb246IGZ1bmN0aW9uKCBYLCBZLCBsYXNlciAgKSB7XG5cdFx0dmFyIGNlbnRlclkgPSBnYW1lT2JqZWN0LmNhbm5vbldpZHRoIC8gMjtcblx0XHR2YXIgcG9zaXRpb24gPSB7ICdsZWZ0JyA6IC0xLCAndG9wJzogLTEgfTtcblx0XHRcblx0XHRwb3NpdGlvblsnbGVmdCddID0gWCArICggZ2FtZU9iamVjdC5zY3JlZW5XaWR0aCAvIDIgKTtcblx0XHRwb3NpdGlvblsndG9wJ10gPSBNYXRoLmFicyggWSAtIGdhbWVPYmplY3Quc2NyZWVuSGVpZ2h0ICk7XG5cblx0XHRsYXNlci5zdHlsZS5sZWZ0ID0gIHBvc2l0aW9uWydsZWZ0J10gKyAncHgnO1xuXHRcdGxhc2VyLnN0eWxlLnRvcCA9ICAoIHBvc2l0aW9uWyd0b3AnXSAtIGNlbnRlclkgKSsgJ3B4JztcblxuXHRcdHJldHVybiBwb3NpdGlvbjtcblx0fSxcblxuXHRmb2xsb3dNb3VzZUJvdHRvbTogZnVuY3Rpb24oZXZlbnQpIHtcblx0XHR2YXIgbW91c2VYID0gZXZlbnQuY2xpZW50WCAtICggZ2FtZU9iamVjdC5zY3JlZW5XaWR0aCAvIDIgKTtcblx0XHR2YXIgbW91c2VZID0gTWF0aC5hYnMoIGV2ZW50LmNsaWVudFkgLSBnYW1lT2JqZWN0LnNjcmVlbkhlaWdodCApO1xuXHRcdHZhciBoeXBvdGVudXNlID0gQ2xpY2tHYW1lLmxpbmVMZW5ndGgoIG1vdXNlWCwgbW91c2VZICk7XG5cdFx0dmFyIE9wcG9zaXRlID0gbW91c2VZO1xuXHRcdHZhciBTT0ggPSBPcHBvc2l0ZSAvIGh5cG90ZW51c2U7XG5cdFx0dmFyIGRlZ3JlZSA9IE1hdGguYXNpbihTT0gpICogKDE4MC9NYXRoLlBJKTtcblx0XHRcblx0XHRkZWdyZWUgPSBtb3VzZVggPiAwID8gOTAgLSBkZWdyZWUgOiBkZWdyZWUgLSA5MDtcblxuXHRcdFxuXG5cdH0sXG5cblx0Zm9sbG93TW91c2U6IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0dmFyIHBvc2l0aW9uID0gdXNlckNvbnRyb2xsZWQuY2Fubm9uc1tnYW1lT2JqZWN0LmN1cnJlbnRDYW5ub25dLnBvc2l0aW9uO1xuXHRcdHZhciBtb3VzZVggPSBldmVudC5jbGllbnRYO1xuXHRcdHZhciBtb3VzZVkgPSBNYXRoLmFicyhldmVudC5jbGllbnRZIC0gZ2FtZU9iamVjdC5zY3JlZW5IZWlnaHQpO1xuXHRcdHZhciBwbGFjZW1lbnQgPSB1c2VyQ29udHJvbGxlZC5jYW5ub25zW2dhbWVPYmplY3QuY3VycmVudENhbm5vbl0uY2Fubm9uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdHZhciBjYW5ub25ZID0gTWF0aC5hYnMoKHBsYWNlbWVudC5ib3R0b20gLSAoZ2FtZU9iamVjdC5jYW5ub25IZWlnaHQgLyAyKSAtIGdhbWVPYmplY3Quc2NyZWVuSGVpZ2h0KSk7XG5cdFx0dmFyIGNhbm5vblggPSBwb3NpdGlvbiA9PSAncmlnaHQnID8gcGxhY2VtZW50LnJpZ2h0IDogcGxhY2VtZW50LmxlZnQ7XG5cdFx0XG5cdFx0dmFyIHdhbGwgPSB7ICd4JzogKHBvc2l0aW9uID09ICdyaWdodCcgPyBnYW1lT2JqZWN0LnNjcmVlbldpZHRoIDogMCksICd5JzogbW91c2VZfTtcblx0XHR2YXIgbW91c2UgPSB7ICd4JzogbW91c2VYLCAneSc6IG1vdXNlWX07IFxuXHRcdHZhciBjYW5ub24gPSB7ICd4JzogY2Fubm9uWCwgJ3knOiBjYW5ub25ZfTtcblxuXHRcdHZhciBvcHBvc2l0ZSA9IE1hdGguYWJzKG1vdXNlLnggLSB3YWxsLngpO1xuXHRcdHZhciBhZGphY2VudCA9IE1hdGguYWJzKGNhbm5vbi55IC0gd2FsbC55KTsgXG5cdFx0dmFyIHRhbiA9IG9wcG9zaXRlL2FkamFjZW50O1xuXHRcdHZhciBkZWdyZWUgPSBNYXRoLmF0YW4odGFuKSAqIDE4MCAvIE1hdGguUEk7XG5cblx0XHRkZWdyZWUgPSA5MCAtIGRlZ3JlZTtcblxuXHRcdGlmIChwb3NpdGlvbiA9PSAncmlnaHQnKSB7XG5cdFx0XHRpZiAobW91c2UueSA8IGNhbm5vbi55KSB7XG5cdFx0XHRcdGRlZ3JlZSA9IC1kZWdyZWU7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmIChtb3VzZS55ID4gY2Fubm9uLnkpIHtcblx0XHRcdFx0ZGVncmVlID0gLWRlZ3JlZTtcblx0XHRcdH1cblx0XHR9XG5cblxuXHRcdHVzZXJDb250cm9sbGVkLmNhbm5vbnNbZ2FtZU9iamVjdC5jdXJyZW50Q2Fubm9uXS5jYW5ub24uc3R5bGUud2Via2l0VHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoLTUwJSkgcm90YXRlKCAnICsgZGVncmVlICsgJ2RlZyknO1xuXHRcdHVzZXJDb250cm9sbGVkLmNhbm5vbnNbZ2FtZU9iamVjdC5jdXJyZW50Q2Fubm9uXS5jYW5ub24uc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoLTUwJSkgcm90YXRlKCAnICsgZGVncmVlICsgJ2RlZyknO1x0XG5cdH0sXG5cblx0a2V5cHJlc3M6IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0c3dpdGNoKGV2ZW50LmtleUNvZGUpIHtcblx0XHRcdGNhc2UgNDk6XG5cdFx0XHRcdGdhbWVPYmplY3QuY3VycmVudENhbm5vbiA9ICd0b3BSaWdodCc7IFxuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgNTA6XG5cdFx0XHRcdGdhbWVPYmplY3QuY3VycmVudENhbm5vbiA9ICdib3R0b21SaWdodCc7IFxuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgNTE6XG5cdFx0XHRcdGdhbWVPYmplY3QuY3VycmVudENhbm5vbiA9ICd0b3BMZWZ0JzsgXG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSA1Mjpcblx0XHRcdFx0Z2FtZU9iamVjdC5jdXJyZW50Q2Fubm9uID0gJ2JvdHRvbUxlZnQnOyBcblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9LFxuXG5cdC8vcmVjZW50ZXJzIHRoZSBnYW1lIGNhbm5vbiBhbmQgY2hhbmdlcyBzY3JlZW5IZWlnaHQgYW5kIHNjcmVlbldpZHRoIHdoZW4gd2luZG93IGlzIHJlc2l6ZWQuXG5cdHJlc2l6aW5nOiBmdW5jdGlvbigpIHtcblx0XHRnYW1lT2JqZWN0LnNjcmVlbkhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblx0XHRnYW1lT2JqZWN0LnNjcmVlbldpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG5cdFx0aWYoIGdhbWVPYmplY3Quc2NyZWVuSGVpZ2h0ICE9IGdhbWVPYmplY3QucHJldmlvdXNIZWlnaHQgKSB7XG5cdFx0XHRnYW1lT2JqZWN0LnByZXZpb3VzSGVpZ2h0ID0gZ2FtZU9iamVjdC5zY3JlZW5IZWlnaHQ7XG5cdFx0fVxuXHR9LFxuXG5cblx0Z2V0U2xvcGU6IGZ1bmN0aW9uKCBYLCBZICkge1xuXHRcdHJldHVybiAoIFkgLSBnYW1lT2JqZWN0LmNlbnRlclBvaW50WzFdICkgLyAoIFggLSBnYW1lT2JqZWN0LmNlbnRlclBvaW50WzBdICk7XG5cdH0sXG5cblx0Ly8gQ2VudGVyIHBvaW50IGlzICgwLDApLCBzbyB0aGVyZSBpcyBubyBwb2ludCB0byBhZGQgaXQgdG8gdGhlIGZvcm11bGFcblx0Z2V0TmV3UG9pbnRYOiBmdW5jdGlvbiggZGlzdGFuY2UsIHNsb3BlICkge1xuXHRcdHJldHVybiBnYW1lT2JqZWN0LmNlbnRlclBvaW50WzBdICsgZGlzdGFuY2UgLyBNYXRoLnNxcnQoICggMSArIE1hdGgucG93KHNsb3BlLCAyKSApICk7XG5cdH0sXG5cblx0Ly8gQ2VudGVyIHBvaW50IGlzICgwLDApLCBzbyB0aGVyZSBpcyBubyBwb2ludCB0byBhZGQgaXQgdG8gdGhlIGZvcm11bGFcblx0Z2V0TmV3UG9pbnRZOiBmdW5jdGlvbiggbmV3WCwgc2xvcGUgKSB7XG5cdFx0cmV0dXJuIHNsb3BlICogbmV3WCArIGdhbWVPYmplY3QuY2VudGVyUG9pbnRbMV07XG5cdH0sXG5cblxuXHRsaW5lTGVuZ3RoOiBmdW5jdGlvbiAoIFgsIFkgKSB7XG5cdFx0dmFyIHhDYWxjID0gTWF0aC5wb3coICggZ2FtZU9iamVjdC5jZW50ZXJQb2ludFswXSAtIFggKSwgIDIpO1xuXHRcdHZhciB5Q2FsYyA9IE1hdGgucG93KCAoIGdhbWVPYmplY3QuY2VudGVyUG9pbnRbMV0gLSBZICksIDIpO1xuXHRcdFxuXHRcdHJldHVybiBNYXRoLnNxcnQoICh4Q2FsYyArIHlDYWxjKSApO1xuXHR9XG5cbn1cblxuXG52YXIgZ2FtZU9iamVjdCA9IG5ldyBPYmplY3QoKTtcbnZhciB1c2VyQ29udHJvbGxlZCA9IG5ldyBPYmplY3QoKTtcbndpbmRvdy5vbmxvYWQgPSBDbGlja0dhbWUuaW5pdCgpOyIsIiJdfQ==
