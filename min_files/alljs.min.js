function create_user(){for(var e=new FormData,a=document.getElementById("create-user-form").children,t=0;t<a.length;t++)"text"==a[t].type||"password"==a[t].type?e.append(a[t].name,a[t].value):"file"==a[t].type&&e.append(a[t].name,a[t].files[0],a[t].files[0].name);$.ajax({method:"POST",url:"/create/new_user",data:e,processData:!1,contentType:!1,success:function(){console.log("Back!")}})}
var ClickGame={init:function(){gameObject.screenHeight=window.innerHeight,gameObject.screenWidth=window.innerWidth,gameObject.container=document.getElementsByTagName("body")[0],gameObject.previousHeight=gameObject.screenHeight,userControlled.cannons={topRight:{cannon:null,side:"right",postion:null,centerPoint:[0,0]},bottomRight:{cannon:null,side:"right",postion:null,centerPoint:[0,0]},topLeft:{cannon:null,"side:":"left",postion:null,centerPoint:[0,0]},bottomLeft:{cannon:null,"side:":"left",postion:null,centerPoint:[0,0]}},gameObject.mouseX,gameObject.mouseY,gameObject.currentCannon="topLeft";var e=0;for(var n in userControlled.cannons)userControlled.cannons[n].cannon=document.createElement("div"),userControlled.cannons[n].cannon.setAttribute("id","cannon-"+n),userControlled.cannons[n].cannon.setAttribute("class","cannon-general"),gameObject.container.appendChild(userControlled.cannons[n].cannon),userControlled.cannons[n].position=userControlled.cannons[n].cannon.getBoundingClientRect(),e=userControlled.cannons[n].position.height/2,userControlled.cannons[n].centerPoint[1]=gameObject.screenHeight-(userControlled.cannons[n].position.y+e),userControlled.cannons[n].centerPoint[0]=userControlled.cannons[n].position.x;gameObject.cannonHeight=document.getElementById("cannon-"+gameObject.currentCannon).clientHeight,gameObject.laserArray=[],gameObject.laserCounter=0,gameObject.container.addEventListener("click",ClickGame.laserInit),document.addEventListener("keyup",ClickGame.keypress),window.addEventListener("resize",ClickGame.resizing,!1),document.onmousemove=function(e){var n=ClickGame.getAngle(e,!0);userControlled.cannons[gameObject.currentCannon].cannon.style.webkitTransform="translateY(-50%) rotate( "+n+"deg)",userControlled.cannons[gameObject.currentCannon].cannon.style.transform="translateY(-50%) rotate( "+n+"deg)"}},laserInit:function(e){var n=ClickGame.createLaser(e),t=document.getElementById("tie-fighter-audio"),o=userControlled.cannons[gameObject.currentCannon].side,r={slope:0,yIntercept:0,xIncrementor:0,speed:1,laserNum:-1},a=parseInt(n.style.bottom.replace("px","")),s=userControlled.cannons[gameObject.currentCannon].centerPoint[0],c=e.clientX,l=Math.abs(e.clientY-gameObject.screenHeight);r.slope=ClickGame.getSlope(c,l),r.xIncrementor="right"!=o?1:-1,r.yIntercept=a-r.slope*s,r.laserNum=gameObject.laserCounter,console.log(typeof r.speed),ClickGame.updateLaser(r,n,s,a),gameObject.laserCounter+=1,t.setAttribute("src","http://www.sa-matra.net/sounds/starwars/TIE-Fire.wav"),t.play(),gameObject.laserArray.push(n)},createLaser:function(e){var n=document.createElement("div"),t=document.createElement("div"),o=document.createElement("div"),r=ClickGame.getAngle(e,!1),a=userControlled.cannons[gameObject.currentCannon].side;t.className="laser-top laser-general",o.className="laser-bottom laser-general",n.appendChild(t),n.appendChild(o),o.className="right"!==a?(n.className="laser-container laser-container-left push-laser-left laserNum-"+gameObject.laserCounter,t.className="laser-top push-laser-right laser-general","laser-bottom push-laser-right laser-general"):(n.className="laser-container laser-container-right push-laser-right laserNum-"+gameObject.laserCounter,t.className="laser-top push-laser-left laser-general","laser-bottom push-laser-left laser-general"),n.style.transform="translateY(-50%) rotate( "+r+"deg)",n.style.webkitTransform="translateY(-50%) rotate( "+r+"deg)";var s=userControlled.cannons[gameObject.currentCannon].position.height/2,c=gameObject.screenHeight-(userControlled.cannons[gameObject.currentCannon].position.bottom+s);return n.style.bottom=c+"px",gameObject.container.appendChild(n),n},updateLaser:function(t,o,r,e){window.setTimeout(function(){var e=r+t.xIncrementor,n=t.slope*r+t.yIntercept;(o.style.bottom=n+"px",o.style.left=e+"px",t.speed=t.speed-.3,console.log,0<=e&&e<=gameObject.screenWidth)?ClickGame.updateLaser(t,o,e,n):document.getElementsByClassName("laserNum-"+t.laserNum)[0].remove()},t.speed)},getAngle:function(e){var n=userControlled.cannons[gameObject.currentCannon].side,t=userControlled.cannons[gameObject.currentCannon].position,o=e.clientX,r=Math.abs(e.clientY-gameObject.screenHeight),a=gameObject.screenHeight-(t.bottom-gameObject.cannonHeight/2),s=("right"==n?t.right:t.left,"right"==n?gameObject.screenWidth:0),c=r,l=o,i=r,u=a,m=Math.abs(l-s)/Math.abs(u-c),g=180*Math.atan(m)/Math.PI;return g=90-g,"right"==n?i<u&&(g=-g):u<i&&(g=-g),g},keypress:function(e){switch(e.keyCode){case 49:gameObject.currentCannon="topLeft";break;case 50:gameObject.currentCannon="bottomLeft";break;case 51:gameObject.currentCannon="topRight";break;case 52:gameObject.currentCannon="bottomRight"}},resizing:function(e){var n;for(var t in gameObject.screenHeight=window.innerHeight,gameObject.screenWidth=window.innerWidth,userControlled.cannons)userControlled.cannons[t].position=userControlled.cannons[t].cannon.getBoundingClientRect(),n=userControlled.cannons[t].position.height/2,userControlled.cannons[t].centerPoint[1]=gameObject.screenHeight-(userControlled.cannons[t].position.y+n),userControlled.cannons[t].centerPoint[0]=userControlled.cannons[t].position.x},getSlope:function(e,n){return(n-userControlled.cannons[gameObject.currentCannon].centerPoint[1])/(e-userControlled.cannons[gameObject.currentCannon].centerPoint[0])},lineLength:function(e,n){var t=Math.pow(userControlled.cannons[gameObject.currentCannon].centerPoint[0]-e,2),o=Math.pow(userControlled.cannons[gameObject.currentCannon].centerPoint[0]-n,2);return Math.sqrt(t+o)}},gameObject=new Object,userControlled=new Object;window.onload=ClickGame.init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFqYXguanMiLCJtYWluLmpzIl0sIm5hbWVzIjpbImNyZWF0ZV91c2VyIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsInRoZV9mb3JtIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNoaWxkcmVuIiwiaSIsImxlbmd0aCIsInR5cGUiLCJhcHBlbmQiLCJuYW1lIiwidmFsdWUiLCJmaWxlcyIsIiQiLCJhamF4IiwibWV0aG9kIiwidXJsIiwiZGF0YSIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJzdWNjZXNzIiwiY29uc29sZSIsImxvZyIsIkNsaWNrR2FtZSIsImluaXQiLCJnYW1lT2JqZWN0Iiwic2NyZWVuSGVpZ2h0Iiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJzY3JlZW5XaWR0aCIsImlubmVyV2lkdGgiLCJjb250YWluZXIiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInByZXZpb3VzSGVpZ2h0IiwidXNlckNvbnRyb2xsZWQiLCJjYW5ub25zIiwidG9wUmlnaHQiLCJjYW5ub24iLCJzaWRlIiwicG9zdGlvbiIsImNlbnRlclBvaW50IiwiYm90dG9tUmlnaHQiLCJ0b3BMZWZ0Iiwic2lkZToiLCJib3R0b21MZWZ0IiwibW91c2VYIiwibW91c2VZIiwiY3VycmVudENhbm5vbiIsImhlaWdodCIsImoiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiYXBwZW5kQ2hpbGQiLCJwb3NpdGlvbiIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInkiLCJ4IiwiY2Fubm9uSGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwibGFzZXJBcnJheSIsImxhc2VyQ291bnRlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJsYXNlckluaXQiLCJrZXlwcmVzcyIsInJlc2l6aW5nIiwib25tb3VzZW1vdmUiLCJldmVudCIsImRlZ3JlZSIsImdldEFuZ2xlIiwic3R5bGUiLCJ3ZWJraXRUcmFuc2Zvcm0iLCJ0cmFuc2Zvcm0iLCJsYXNlciIsImNyZWF0ZUxhc2VyIiwidGllRmlnaHRlck5vaXNlIiwibGFzZXJWYWx1ZXMiLCJzbG9wZSIsInlJbnRlcmNlcHQiLCJ4SW5jcmVtZW50b3IiLCJzcGVlZCIsImxhc2VyTnVtIiwicGFyc2VJbnQiLCJib3R0b20iLCJyZXBsYWNlIiwiY2xpZW50WCIsIk1hdGgiLCJhYnMiLCJjbGllbnRZIiwiZ2V0U2xvcGUiLCJ1cGRhdGVMYXNlciIsInBsYXkiLCJwdXNoIiwibGFzZXJUb3AiLCJsYXNlckJvdHRvbSIsImNsYXNzTmFtZSIsInNldFRpbWVvdXQiLCJuZXdYIiwibmV3WSIsImxlZnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwicmVtb3ZlIiwiY2Fubm9uWSIsIndhbGwiLCJyaWdodCIsIm1vdXNlIiwidGFuIiwiYXRhbiIsIlBJIiwia2V5Q29kZSIsIlgiLCJZIiwibGluZUxlbmd0aCIsInhDYWxjIiwicG93IiwieUNhbGMiLCJzcXJ0IiwiT2JqZWN0Iiwib25sb2FkIl0sIm1hcHBpbmdzIjoiQUFDQSxTQUFTQSxjQUtSLElBSkEsSUFBSUMsRUFBVyxJQUFJQyxTQUVmQyxFQUFXQyxTQUFTQyxlQUFnQixvQkFBcUJDLFNBRXBEQyxFQUFJLEVBQUdBLEVBQUlKLEVBQVNLLE9BQVFELElBRS9CLFFBQVVKLEVBQVNJLEdBQUdFLE1BQVEsWUFBY04sRUFBU0ksR0FBR0UsS0FDNURSLEVBQVNTLE9BQVFQLEVBQVNJLEdBQUdJLEtBQU1SLEVBQVNJLEdBQUdLLE9BQ3BDLFFBQVVULEVBQVNJLEdBQUdFLE1BQ2pDUixFQUFTUyxPQUFRUCxFQUFTSSxHQUFHSSxLQUFNUixFQUFTSSxHQUFHTSxNQUFNLEdBQUlWLEVBQVNJLEdBQUdNLE1BQU0sR0FBR0YsTUFJaEZHLEVBQUVDLEtBQU0sQ0FDUEMsT0FBUyxPQUNUQyxJQUFPLG1CQUNQQyxLQUFRakIsRUFDUmtCLGFBQWEsRUFDVkMsYUFBYSxFQUNoQkMsUUFBVSxXQUNUQyxRQUFRQyxJQUFJO0FDdEJmLElBQUlDLFVBQVksQ0FFZkMsS0FBTSxXQUNKQyxXQUFXQyxhQUFlQyxPQUFP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InNvdXJjZXNDb250ZW50IjpbIlxuZnVuY3Rpb24gY3JlYXRlX3VzZXIoKSB7IFxuXHR2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcblxuXHR2YXIgdGhlX2Zvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggXCJjcmVhdGUtdXNlci1mb3JtXCIgKS5jaGlsZHJlbjtcblxuXHRmb3IoIHZhciBpID0gMDsgaSA8IHRoZV9mb3JtLmxlbmd0aDsgaSsrICkge1xuXG5cdFx0aWYgKCAndGV4dCcgPT0gdGhlX2Zvcm1baV0udHlwZSB8fCAncGFzc3dvcmQnID09IHRoZV9mb3JtW2ldLnR5cGUgKSB7XG5cdFx0XHRmb3JtRGF0YS5hcHBlbmQoIHRoZV9mb3JtW2ldLm5hbWUsIHRoZV9mb3JtW2ldLnZhbHVlICk7XG5cdFx0fSBlbHNlIGlmICggJ2ZpbGUnID09IHRoZV9mb3JtW2ldLnR5cGUgKSB7XG5cdFx0XHRmb3JtRGF0YS5hcHBlbmQoIHRoZV9mb3JtW2ldLm5hbWUsIHRoZV9mb3JtW2ldLmZpbGVzWzBdLCB0aGVfZm9ybVtpXS5maWxlc1swXS5uYW1lKTsgXG5cdFx0fVxuXHR9XG5cblx0JC5hamF4KCB7XG5cdFx0bWV0aG9kXHQ6ICdQT1NUJyxcblx0XHR1cmxcdFx0OiAnL2NyZWF0ZS9uZXdfdXNlcicsXG5cdFx0ZGF0YSBcdDogZm9ybURhdGEsXG5cdFx0cHJvY2Vzc0RhdGE6IGZhbHNlLCAgXG5cdCAgICBjb250ZW50VHlwZTogZmFsc2UsXG5cdFx0c3VjY2VzcyA6IGZ1bmN0aW9uKCkge1xuXHRcdFx0Y29uc29sZS5sb2coJ0JhY2shJyk7XG5cdFx0fVxuXHR9KTtcbn0iLCJ2YXIgQ2xpY2tHYW1lID0ge1xuXHQvLyBTZXR0aW5nIHVwIGdhbWVPYmplY3QgdmFyaWFibGVzXG5cdGluaXQ6IGZ1bmN0aW9uICgpIHsgXG5cdFx0XHRnYW1lT2JqZWN0LnNjcmVlbkhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblx0XHRcdGdhbWVPYmplY3Quc2NyZWVuV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcblx0XHRcdGdhbWVPYmplY3QuY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXTtcblx0XHRcdGdhbWVPYmplY3QucHJldmlvdXNIZWlnaHQgPSBnYW1lT2JqZWN0LnNjcmVlbkhlaWdodDtcblx0XHRcdHVzZXJDb250cm9sbGVkLmNhbm5vbnMgPSB7XG5cdFx0XHRcdCd0b3BSaWdodCcgOiB7ICdjYW5ub24nIDogbnVsbCwgJ3NpZGUnOiAncmlnaHQnLCAncG9zdGlvbic6IG51bGwsICdjZW50ZXJQb2ludCc6IFswLDBdfSxcblx0XHRcdFx0J2JvdHRvbVJpZ2h0JyA6IHsgJ2Nhbm5vbicgOiBudWxsLCAnc2lkZSc6ICdyaWdodCcsICdwb3N0aW9uJzogbnVsbCwgJ2NlbnRlclBvaW50JzogWzAsMF19LFxuXHRcdFx0XHQndG9wTGVmdCcgOiB7ICdjYW5ub24nIDogbnVsbCwgJ3NpZGU6JzogJ2xlZnQnLCAncG9zdGlvbic6IG51bGwsICdjZW50ZXJQb2ludCc6IFswLDBdfSxcblx0XHRcdFx0J2JvdHRvbUxlZnQnIDogeyAnY2Fubm9uJyA6IG51bGwsICdzaWRlOic6ICdsZWZ0JywgJ3Bvc3Rpb24nOiBudWxsLCAnY2VudGVyUG9pbnQnOiBbMCwwXX1cblx0XHRcdH07XG5cdFx0XHRnYW1lT2JqZWN0Lm1vdXNlWDtcblx0XHRcdGdhbWVPYmplY3QubW91c2VZO1xuXHRcdFx0Z2FtZU9iamVjdC5jdXJyZW50Q2Fubm9uID0gJ3RvcExlZnQnOyAgXG5cblx0XHRcdHZhciBoZWlnaHQgPSAwO1xuXHRcdFx0Zm9yKCB2YXIgaiBpbiB1c2VyQ29udHJvbGxlZC5jYW5ub25zICkge1xuXHRcdFx0XHR1c2VyQ29udHJvbGxlZC5jYW5ub25zW2pdLmNhbm5vbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHR1c2VyQ29udHJvbGxlZC5jYW5ub25zW2pdLmNhbm5vbi5zZXRBdHRyaWJ1dGUoICdpZCcsICdjYW5ub24tJyArIGogKTtcblx0XHRcdFx0dXNlckNvbnRyb2xsZWQuY2Fubm9uc1tqXS5jYW5ub24uc2V0QXR0cmlidXRlKCAnY2xhc3MnLCAnY2Fubm9uLWdlbmVyYWwnICk7XG5cdFx0XHRcdGdhbWVPYmplY3QuY29udGFpbmVyLmFwcGVuZENoaWxkKHVzZXJDb250cm9sbGVkLmNhbm5vbnNbal0uY2Fubm9uKTtcblx0XHRcdFx0dXNlckNvbnRyb2xsZWQuY2Fubm9uc1tqXS5wb3NpdGlvbiA9IHVzZXJDb250cm9sbGVkLmNhbm5vbnNbal0uY2Fubm9uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdFx0XHRoZWlnaHQgPSB1c2VyQ29udHJvbGxlZC5jYW5ub25zW2pdLnBvc2l0aW9uLmhlaWdodCAvIDI7XG5cdFx0XHRcdHVzZXJDb250cm9sbGVkLmNhbm5vbnNbal0uY2VudGVyUG9pbnRbMV0gPSBnYW1lT2JqZWN0LnNjcmVlbkhlaWdodCAtICh1c2VyQ29udHJvbGxlZC5jYW5ub25zW2pdLnBvc2l0aW9uLnkgKyBoZWlnaHQpO1xuXHRcdFx0XHR1c2VyQ29udHJvbGxlZC5jYW5ub25zW2pdLmNlbnRlclBvaW50WzBdID0gdXNlckNvbnRyb2xsZWQuY2Fubm9uc1tqXS5wb3NpdGlvbi54O1xuXHRcdFx0fVxuXG5cdFx0XHRnYW1lT2JqZWN0LmNhbm5vbkhlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW5ub24tJyArIGdhbWVPYmplY3QuY3VycmVudENhbm5vbikuY2xpZW50SGVpZ2h0O1xuXHRcdFx0Z2FtZU9iamVjdC5sYXNlckFycmF5ID0gW107XG5cdFx0XHRnYW1lT2JqZWN0Lmxhc2VyQ291bnRlciA9IDA7XG5cdFx0XHRcblx0XHRcdGdhbWVPYmplY3QuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgQ2xpY2tHYW1lLmxhc2VySW5pdCk7XG5cdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIENsaWNrR2FtZS5rZXlwcmVzcyk7XG5cblx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIENsaWNrR2FtZS5yZXNpemluZywgZmFsc2UpO1xuXG5cdFx0XHRkb2N1bWVudC5vbm1vdXNlbW92ZSA9IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0dmFyIGRlZ3JlZSA9IENsaWNrR2FtZS5nZXRBbmdsZShldmVudCwgdHJ1ZSk7XG5cdFx0XHRcdHVzZXJDb250cm9sbGVkLmNhbm5vbnNbZ2FtZU9iamVjdC5jdXJyZW50Q2Fubm9uXS5jYW5ub24uc3R5bGUud2Via2l0VHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoLTUwJSkgcm90YXRlKCAnICsgZGVncmVlICsgJ2RlZyknO1xuXHRcdFx0XHR1c2VyQ29udHJvbGxlZC5jYW5ub25zW2dhbWVPYmplY3QuY3VycmVudENhbm5vbl0uY2Fubm9uLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKC01MCUpIHJvdGF0ZSggJyArIGRlZ3JlZSArICdkZWcpJztcblx0XHRcdH1cblx0fSxcblxuXHRcblx0bGFzZXJJbml0OiBmdW5jdGlvbiggZXZlbnQgKSB7IFxuXHRcdC8vIFNldHRpbmcgdXAgbGF6ZXIgc3RhcnQgcG9pbnQgYW5kIGFuZ2xlXG5cdFx0dmFyIGxhc2VyIFx0XHRcdD0gQ2xpY2tHYW1lLmNyZWF0ZUxhc2VyKGV2ZW50KTsgXG4gICAgXHR2YXIgdGllRmlnaHRlck5vaXNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpZS1maWdodGVyLWF1ZGlvJyk7XG4gICAgXHR2YXIgc2lkZSBcdFx0XHQ9IHVzZXJDb250cm9sbGVkLmNhbm5vbnNbZ2FtZU9iamVjdC5jdXJyZW50Q2Fubm9uXS5zaWRlO1xuXG4gICAgXHQvLyBHZXR0aW5nIHNsb3BlIGFuZCB5LWludGVyZXB0IGZvciB5PW14K2IgZm9ybXVsYVxuICAgIFx0dmFyIGxhc2VyVmFsdWVzIFx0PSB7J3Nsb3BlJyA6IDAsICd5SW50ZXJjZXB0JyA6IDAsICd4SW5jcmVtZW50b3InIDogMCwgJ3NwZWVkJyA6IDEsICdsYXNlck51bScgOiAtMX07XG4gICAgXHR2YXIgeSA9IHBhcnNlSW50KGxhc2VyLnN0eWxlLmJvdHRvbS5yZXBsYWNlKCdweCcsJycpKTtcbiAgICBcdHZhciB4ID0gdXNlckNvbnRyb2xsZWQuY2Fubm9uc1tnYW1lT2JqZWN0LmN1cnJlbnRDYW5ub25dLmNlbnRlclBvaW50WzBdO1xuICAgIFx0dmFyIG1vdXNlWCBcdFx0PSBldmVudC5jbGllbnRYO1xuXHRcdHZhciBtb3VzZVkgXHRcdD0gTWF0aC5hYnMoZXZlbnQuY2xpZW50WSAtIGdhbWVPYmplY3Quc2NyZWVuSGVpZ2h0KTtcdFxuICAgIFx0XG4gICAgXHRsYXNlclZhbHVlcy5zbG9wZSBcdD0gQ2xpY2tHYW1lLmdldFNsb3BlKG1vdXNlWCwgbW91c2VZKTsgXG4gICAgXHRsYXNlclZhbHVlcy54SW5jcmVtZW50b3IgPSBzaWRlICE9ICdyaWdodCcgPyAxIDogLTE7XG4gICAgXHRsYXNlclZhbHVlcy55SW50ZXJjZXB0ID0geSAtIChsYXNlclZhbHVlcy5zbG9wZSAqIHgpOyBcblxuICAgIFx0bGFzZXJWYWx1ZXMubGFzZXJOdW0gPSBnYW1lT2JqZWN0Lmxhc2VyQ291bnRlcjtcbiAgICBcdGNvbnNvbGUubG9nKHR5cGVvZiBsYXNlclZhbHVlcy5zcGVlZCk7XG4gICAgXHRDbGlja0dhbWUudXBkYXRlTGFzZXIobGFzZXJWYWx1ZXMsIGxhc2VyLCB4LCB5KTtcblxuICAgIFx0Z2FtZU9iamVjdC5sYXNlckNvdW50ZXIgKz0gMTsgXG4gICAgXHR0aWVGaWdodGVyTm9pc2Uuc2V0QXR0cmlidXRlKCdzcmMnLCAnaHR0cDovL3d3dy5zYS1tYXRyYS5uZXQvc291bmRzL3N0YXJ3YXJzL1RJRS1GaXJlLndhdicpO1xuICAgIFx0dGllRmlnaHRlck5vaXNlLnBsYXkoKTtcbiAgICBcblx0XHRnYW1lT2JqZWN0Lmxhc2VyQXJyYXkucHVzaCggbGFzZXIgKTtcblx0XG5cdH0sXG5cblx0Ly9DcmVhdGVzIGEgbGFzZXIgYmFzZWQgb24gd2hlcmUgdGhlIGNhbm5vbiBpcyBjdXJyZW50bHkgcG9pbnRpbmcuXG5cdGNyZWF0ZUxhc2VyOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0dmFyIGxhc2VyIFx0XHQ9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdHZhciBsYXNlclRvcCBcdD0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0dmFyIGxhc2VyQm90dG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0dmFyIGRlZ3JlZSBcdFx0PSBDbGlja0dhbWUuZ2V0QW5nbGUoZXZlbnQsIGZhbHNlKTtcblx0XHR2YXIgc2lkZSBcdFx0PSB1c2VyQ29udHJvbGxlZC5jYW5ub25zW2dhbWVPYmplY3QuY3VycmVudENhbm5vbl0uc2lkZTtcblxuXG5cdFx0bGFzZXJUb3AuY2xhc3NOYW1lID0gJ2xhc2VyLXRvcCBsYXNlci1nZW5lcmFsJztcblx0XHRsYXNlckJvdHRvbS5jbGFzc05hbWUgPSAnbGFzZXItYm90dG9tIGxhc2VyLWdlbmVyYWwnO1xuXG5cdFx0bGFzZXIuYXBwZW5kQ2hpbGQobGFzZXJUb3ApO1xuXHRcdGxhc2VyLmFwcGVuZENoaWxkKGxhc2VyQm90dG9tKTtcblx0XHRcblx0XHRpZiAoIHNpZGUgIT09ICdyaWdodCcgKSB7XG5cdFx0XHRsYXNlci5jbGFzc05hbWUgXHRcdD0gJ2xhc2VyLWNvbnRhaW5lciBsYXNlci1jb250YWluZXItbGVmdCBwdXNoLWxhc2VyLWxlZnQgbGFzZXJOdW0tJyArIGdhbWVPYmplY3QubGFzZXJDb3VudGVyOyBcblx0XHRcdGxhc2VyVG9wLmNsYXNzTmFtZSBcdFx0PSAnbGFzZXItdG9wIHB1c2gtbGFzZXItcmlnaHQgbGFzZXItZ2VuZXJhbCc7XG5cdFx0XHRsYXNlckJvdHRvbS5jbGFzc05hbWUgXHQ9ICdsYXNlci1ib3R0b20gcHVzaC1sYXNlci1yaWdodCBsYXNlci1nZW5lcmFsJztcblx0XHR9IGVsc2Uge1xuXHRcdFx0bGFzZXIuY2xhc3NOYW1lID0gJ2xhc2VyLWNvbnRhaW5lciBsYXNlci1jb250YWluZXItcmlnaHQgcHVzaC1sYXNlci1yaWdodCBsYXNlck51bS0nICsgZ2FtZU9iamVjdC5sYXNlckNvdW50ZXI7IFxuXHRcdFx0bGFzZXJUb3AuY2xhc3NOYW1lIFx0XHQ9ICdsYXNlci10b3AgcHVzaC1sYXNlci1sZWZ0IGxhc2VyLWdlbmVyYWwnO1xuXHRcdFx0bGFzZXJCb3R0b20uY2xhc3NOYW1lIFx0PSAnbGFzZXItYm90dG9tIHB1c2gtbGFzZXItbGVmdCBsYXNlci1nZW5lcmFsJztcblx0XHR9XG5cdFx0bGFzZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoLTUwJSkgcm90YXRlKCAnICsgZGVncmVlICsgJ2RlZyknO1xuXHRcdGxhc2VyLnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKC01MCUpIHJvdGF0ZSggJyArIGRlZ3JlZSArICdkZWcpJztcblxuXHRcdFxuXHRcdHZhciBoZWlnaHQgPSB1c2VyQ29udHJvbGxlZC5jYW5ub25zW2dhbWVPYmplY3QuY3VycmVudENhbm5vbl0ucG9zaXRpb24uaGVpZ2h0LzI7XHRcblx0XHR2YXIgYm90dG9tID0gZ2FtZU9iamVjdC5zY3JlZW5IZWlnaHQgLSAodXNlckNvbnRyb2xsZWQuY2Fubm9uc1tnYW1lT2JqZWN0LmN1cnJlbnRDYW5ub25dLnBvc2l0aW9uLmJvdHRvbSArIGhlaWdodCk7XG5cblx0XHRsYXNlci5zdHlsZS5ib3R0b20gPSBib3R0b20gKyAncHgnO1xuXG5cdFx0Z2FtZU9iamVjdC5jb250YWluZXIuYXBwZW5kQ2hpbGQoIGxhc2VyICk7IFxuXG5cdFx0cmV0dXJuIGxhc2VyO1xuXHR9LFxuXG5cdHVwZGF0ZUxhc2VyOiBmdW5jdGlvbiggbGFzZXJWYWx1ZXMsIGxhc2VyLCB4LCB5ICkge1xuXHRcdHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbigpeyBcblx0XHRcdHZhciBuZXdYID0geCArIGxhc2VyVmFsdWVzLnhJbmNyZW1lbnRvcjtcblx0XHRcdHZhciBuZXdZID0gKGxhc2VyVmFsdWVzLnNsb3BlICogeCkgKyBsYXNlclZhbHVlcy55SW50ZXJjZXB0O1xuXG5cdFx0XHRsYXNlci5zdHlsZS5ib3R0b20gXHQ9IG5ld1kgKyAncHgnO1xuXHRcdFx0bGFzZXIuc3R5bGUubGVmdCBcdD0gbmV3WCArICdweCc7XG5cblx0XHRcdGxhc2VyVmFsdWVzWydzcGVlZCddID0gbGFzZXJWYWx1ZXNbJ3NwZWVkJ10gLSAuMztcblx0XHRcdGNvbnNvbGUubG9nXG5cdFx0XHRpZihuZXdYID49IDAgJiYgbmV3WCA8PSBnYW1lT2JqZWN0LnNjcmVlbldpZHRoICkge1xuXHRcdFx0XHRDbGlja0dhbWUudXBkYXRlTGFzZXIoIGxhc2VyVmFsdWVzLCBsYXNlciwgbmV3WCwgbmV3WSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dmFyIGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdsYXNlck51bS0nICsgbGFzZXJWYWx1ZXMubGFzZXJOdW0pWzBdO1xuXHRcdFx0XHRlbGVtLnJlbW92ZSgpOyBcblx0XHRcdH1cblx0XHR9LCBsYXNlclZhbHVlc1snc3BlZWQnXSk7XG5cblx0fSxcblxuXHRnZXRBbmdsZTogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdHZhciBzaWRlID0gdXNlckNvbnRyb2xsZWQuY2Fubm9uc1tnYW1lT2JqZWN0LmN1cnJlbnRDYW5ub25dLnNpZGU7XG5cdFx0dmFyIHBvc2l0aW9uID0gdXNlckNvbnRyb2xsZWQuY2Fubm9uc1tnYW1lT2JqZWN0LmN1cnJlbnRDYW5ub25dLnBvc2l0aW9uO1xuXG5cdFx0dmFyIG1vdXNlWCA9IGV2ZW50LmNsaWVudFg7XG5cdFx0dmFyIG1vdXNlWSA9IE1hdGguYWJzKGV2ZW50LmNsaWVudFkgLSBnYW1lT2JqZWN0LnNjcmVlbkhlaWdodCk7XG5cdFx0dmFyIGNhbm5vblkgPSBnYW1lT2JqZWN0LnNjcmVlbkhlaWdodCAtICggcG9zaXRpb24uYm90dG9tIC0gKGdhbWVPYmplY3QuY2Fubm9uSGVpZ2h0IC8gMikgKTtcblx0XHR2YXIgY2Fubm9uWCA9IHNpZGUgPT0gJ3JpZ2h0JyA/IHBvc2l0aW9uLnJpZ2h0IDogcG9zaXRpb24ubGVmdDtcblx0XHRcblx0XHR2YXIgd2FsbCA9IHsgJ3gnOiAoc2lkZSA9PSAncmlnaHQnID8gZ2FtZU9iamVjdC5zY3JlZW5XaWR0aCA6IDApLCAneSc6IG1vdXNlWX07XG5cdFx0dmFyIG1vdXNlID0geyAneCc6IG1vdXNlWCwgJ3knOiBtb3VzZVl9OyBcblx0XHR2YXIgY2Fubm9uID0geyAneCc6IGNhbm5vblgsICd5JzogY2Fubm9uWX07XG5cblx0XHR2YXIgb3Bwb3NpdGUgPSBNYXRoLmFicyhtb3VzZS54IC0gd2FsbC54KTtcblx0XHR2YXIgYWRqYWNlbnQgPSBNYXRoLmFicyhjYW5ub24ueSAtIHdhbGwueSk7IFxuXHRcdHZhciB0YW4gPSBvcHBvc2l0ZS9hZGphY2VudDtcblx0XHR2YXIgZGVncmVlID0gTWF0aC5hdGFuKHRhbikgKiAxODAgLyBNYXRoLlBJOyBcblxuXHRcdGRlZ3JlZSA9IDkwIC0gZGVncmVlO1xuXG5cdFx0aWYgKHNpZGUgPT0gJ3JpZ2h0JykgeyBcblx0XHRcdGlmIChtb3VzZS55IDwgY2Fubm9uLnkpIHsgXG5cdFx0XHRcdGRlZ3JlZSA9IC1kZWdyZWU7XG5cdFx0XHR9IFxuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAobW91c2UueSA+IGNhbm5vbi55KSB7XG5cdFx0XHRcdGRlZ3JlZSA9IC1kZWdyZWU7XG5cdFx0XHR9IFxuXHRcdH1cblxuXHRcdHJldHVybiBkZWdyZWU7XHRcblx0fSxcblxuXHRrZXlwcmVzczogZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRzd2l0Y2goZXZlbnQua2V5Q29kZSkge1xuXHRcdFx0Y2FzZSA0OTpcblx0XHRcdFx0Z2FtZU9iamVjdC5jdXJyZW50Q2Fubm9uID0gJ3RvcExlZnQnOyBcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDUwOlxuXHRcdFx0XHRnYW1lT2JqZWN0LmN1cnJlbnRDYW5ub24gPSAnYm90dG9tTGVmdCc7IFxuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgNTE6XG5cdFx0XHRcdGdhbWVPYmplY3QuY3VycmVudENhbm5vbiA9ICd0b3BSaWdodCc7IFxuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgNTI6XG5cdFx0XHRcdGdhbWVPYmplY3QuY3VycmVudENhbm5vbiA9ICdib3R0b21SaWdodCc7IFxuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cdH0sXG5cblx0Ly9yZWNlbnRlcnMgdGhlIGdhbWUgY2Fubm9uIGFuZCBjaGFuZ2VzIHNjcmVlbkhlaWdodCBhbmQgc2NyZWVuV2lkdGggd2hlbiB3aW5kb3cgaXMgcmVzaXplZC5cblx0cmVzaXppbmc6IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0Z2FtZU9iamVjdC5zY3JlZW5IZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cdFx0Z2FtZU9iamVjdC5zY3JlZW5XaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXHRcdHZhciBoZWlnaHQ7XG5cblx0XHRmb3IoIHZhciBqIGluIHVzZXJDb250cm9sbGVkLmNhbm5vbnMgKSB7XG5cblx0XHRcdHVzZXJDb250cm9sbGVkLmNhbm5vbnNbal0ucG9zaXRpb24gPSB1c2VyQ29udHJvbGxlZC5jYW5ub25zW2pdLmNhbm5vbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuXHRcdFx0aGVpZ2h0ID0gdXNlckNvbnRyb2xsZWQuY2Fubm9uc1tqXS5wb3NpdGlvbi5oZWlnaHQgLyAyO1xuXHRcdFx0dXNlckNvbnRyb2xsZWQuY2Fubm9uc1tqXS5jZW50ZXJQb2ludFsxXSA9IGdhbWVPYmplY3Quc2NyZWVuSGVpZ2h0IC0gKHVzZXJDb250cm9sbGVkLmNhbm5vbnNbal0ucG9zaXRpb24ueSArIGhlaWdodCk7XG5cdFx0XHR1c2VyQ29udHJvbGxlZC5jYW5ub25zW2pdLmNlbnRlclBvaW50WzBdID0gdXNlckNvbnRyb2xsZWQuY2Fubm9uc1tqXS5wb3NpdGlvbi54O1xuXG5cdFx0fVxuXHR9LFxuXG5cblx0Z2V0U2xvcGU6IGZ1bmN0aW9uKCBYLCBZICkge1xuXHRcdHJldHVybiAoIFkgLSB1c2VyQ29udHJvbGxlZC5jYW5ub25zW2dhbWVPYmplY3QuY3VycmVudENhbm5vbl0uY2VudGVyUG9pbnRbMV0gKSAvICggWCAtIHVzZXJDb250cm9sbGVkLmNhbm5vbnNbZ2FtZU9iamVjdC5jdXJyZW50Q2Fubm9uXS5jZW50ZXJQb2ludFswXSApO1xuXHR9LFxuXG5cblx0bGluZUxlbmd0aDogZnVuY3Rpb24gKCBYLCBZICkge1xuXHRcdHZhciB4OyBcblx0XHR2YXIgeENhbGMgPSBNYXRoLnBvdyggKCB1c2VyQ29udHJvbGxlZC5jYW5ub25zW2dhbWVPYmplY3QuY3VycmVudENhbm5vbl0uY2VudGVyUG9pbnRbMF0gLSBYICksICAyKTtcblx0XHR2YXIgeUNhbGMgPSBNYXRoLnBvdyggKCB1c2VyQ29udHJvbGxlZC5jYW5ub25zW2dhbWVPYmplY3QuY3VycmVudENhbm5vbl0uY2VudGVyUG9pbnRbMF0gLSBZICksIDIpO1xuXHRcdFxuXHRcdHJldHVybiBNYXRoLnNxcnQoICh4Q2FsYyArIHlDYWxjKSApO1xuXHR9XG5cbn1cblxuXG52YXIgZ2FtZU9iamVjdCA9IG5ldyBPYmplY3QoKTtcbnZhciB1c2VyQ29udHJvbGxlZCA9IG5ldyBPYmplY3QoKTtcbndpbmRvdy5vbmxvYWQgPSBDbGlja0dhbWUuaW5pdCgpOyJdfQ==
